<div class="task-form-container">
  <h2>Add New Task</h2>

  <form [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="task-form">
    <!-- Title Field -->
    <div class="form-group">
      <label for="title">Task Title *</label>
      <input 
        type="text" 
        id="title" 
        formControlName="title" 
        placeholder="Enter task title"
        [class.error]="titleControl?.invalid && titleControl?.touched"
        autocomplete="off"
      />

      <div class="error-messages" *ngIf="titleControl?.invalid && titleControl?.touched">
        <small *ngIf="titleControl?.errors?.['required']">Title is required</small>
        <small *ngIf="titleControl?.errors?.['minlength']">Title must be at least 3 characters</small>
        <small *ngIf="titleControl?.errors?.['maxlength']">Title must not exceed 100 characters</small>
      </div>
    </div>

    <!-- Description Field -->
    <div class="form-group">
      <label for="description">Task Description *</label>
      <textarea 
        id="description" 
        formControlName="description" 
        placeholder="Enter task description"
        rows="4"
        [class.error]="descriptionControl?.invalid && descriptionControl?.touched"
      ></textarea>

      <div class="error-messages" *ngIf="descriptionControl?.invalid && descriptionControl?.touched">
        <small *ngIf="descriptionControl?.errors?.['required']">Description is required</small>
        <small *ngIf="descriptionControl?.errors?.['minlength']">Description must be at least 5 characters</small>
        <small *ngIf="descriptionControl?.errors?.['maxlength']">Description must not exceed 500 characters</small>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="form-actions">
      <button 
        type="submit" 
        class="btn btn-primary"
        [disabled]="isFormInvalid || (loading$ | async)"
      >
        <span *ngIf="loading$ | async" class="loading-spinner"></span>
        {{ (loading$ | async) ? 'Adding Task...' : 'Add Task' }}
      </button>
    </div>

    <!-- Error Message -->
    <div class="error-alert" *ngIf="error$ | async as error">
      <p>{{ error }}</p>
    </div>
  </form>
</div>